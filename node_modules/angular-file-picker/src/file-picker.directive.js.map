{"version":3,"sources":["../../src/file-picker.directive.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,UAAU,EACV,YAAY,EACZ,KAAK,EACL,YAAY,EAEZ,MAAM,EACN,QAAQ,EACT,MAAM,eAAA,CAAgB;AAGvB,OAAO,EAAE,cAAA,EAAe,MAAO,oBAAA,CAAqB;AAGpD;IASE,6BAAoB,EAAc,EAAU,QAAkB;QAA1C,OAAE,GAAF,EAAE,CAAY;QAAU,aAAQ,GAAR,QAAQ,CAAU;QAPvD,WAAM,GAAG,EAAE,CAAC;QAGZ,aAAQ,GAAG,IAAI,YAAY,EAAc,CAAC;IAKjD,CAAC;IAED,sCAAQ,GAAR;QAAA,iBAaC;QAZC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;QAE7D,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,UAAC,KAAU;YACpD,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAClC,MAAM,CAAC;YACT,CAAC;YAED,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,oCAAM,GAAN;QACE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IACzD,CAAC;IAEO,sCAAQ,GAAhB,UAAiB,IAAU;QAA3B,iBAWC;QAVC,IAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAEhC,MAAM,CAAC,MAAM,GAAG,UAAC,MAAqB;YACpC,IAAM,UAAU,GAAG,MAAM,CAAC,MAAoB,CAAC;YAC/C,IAAM,UAAU,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;YAEjH,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACjC,CAAC,CAAC;QAEF,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAgBH,0BAAC;AAAD,CA3DA,AA2DC;;AAfM,8BAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;gBACxB,QAAQ,EAAE,gBAAgB;aAC3B,EAAG,EAAE;CACL,CAAC;AACF,kBAAkB;AACX,kCAAc,GAAmE,cAAM,OAAA;IAC9F,EAAC,IAAI,EAAE,UAAU,GAAG;IACpB,EAAC,IAAI,EAAE,QAAQ,GAAG;CACjB,EAH6F,CAG7F,CAAC;AACK,kCAAc,GAA2C;IAChE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC5B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAC/B,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,OAAO,EAAG,EAAE,EAAE;CACrD,CAAC","file":"file-picker.directive.js","sourceRoot":"","sourcesContent":["import {\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  HostListener,\r\n  OnInit,\r\n  Output,\r\n  Renderer\r\n} from '@angular/core';\r\n\r\nimport { PickedFile } from './picked-file';\r\nimport { PickedFileImpl } from './picked-file-impl';\r\n\r\n\r\nexport class FilePickerDirective implements OnInit {\r\n  \r\n  public accept = '';\r\n\r\n  \r\n  public filePick = new EventEmitter<PickedFile>();\r\n  \r\n  private input: any;\r\n\r\n  constructor(private el: ElementRef, private renderer: Renderer) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.input = this.renderer.createElement(this.el.nativeElement.parentNode, 'input');\r\n    this.renderer.setElementAttribute(this.input, 'type', 'file');\r\n    this.renderer.setElementAttribute(this.input, 'accept', this.accept);\r\n    this.renderer.setElementStyle(this.input, 'display', 'none');\r\n\r\n    this.renderer.listen(this.input, 'change', (event: any) => {\r\n      if (event.target.files.length < 1) {\r\n        return;\r\n      }\r\n      \r\n      this.readFile(event.target.files[0]);\r\n    });\r\n  }\r\n\r\n  \r\n  browse() {\r\n    this.renderer.invokeElementMethod(this.input, 'click');\r\n  }\r\n\r\n  private readFile(file: File) {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (loaded: ProgressEvent) => {\r\n      const fileReader = loaded.target as FileReader;\r\n      const pickedFile = new PickedFileImpl(file.lastModifiedDate, file.name, file.size, file.type, fileReader.result);\r\n      \r\n      this.filePick.emit(pickedFile);\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n  selector: '[ngFilePicker]'\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'accept': [{ type: Input },],\n'filePick': [{ type: Output },],\n'browse': [{ type: HostListener, args: ['click', ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}